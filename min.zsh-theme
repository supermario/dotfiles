# Min: minimalistic theme
# Inspired by ys: http://ysmood.org/wp/2013/03/my-ys-terminal-theme/

# Machine name.
function box_name {
    [ -f ~/.box-name ] && cat ~/.box-name || echo $HOST
}

# Directory info.
local current_dir='${PWD/#$HOME/~}'

# Git info.
local git_info='$(git_prompt_info)'
ZSH_THEME_GIT_PROMPT_PREFIX=" Â± %{$fg[cyan]%}"
ZSH_THEME_GIT_PROMPT_SUFFIX="%{$reset_color%}"
ZSH_THEME_GIT_PROMPT_DIRTY=" %{$fg[red]%}x"
ZSH_THEME_GIT_PROMPT_CLEAN=" %{$fg[green]%}o"

# Add devbox indicator if DEVBOX_SHELL_ENABLED is set
local devbox_indicator=''
if [[ -n "$DEVBOX_SHELL_ENABLED" ]]; then
    devbox_indicator='ðŸ“¦ %{$fg[magenta]%}devbox%{$reset_color%} '
fi

# Prompt format: \n # USER DIRECTORY (git:Â± BRANCH STATE) (right: TIME) \n $
PROMPT="
%{$terminfo[bold]$fg[blue]%}#%{$reset_color%} \
%{$fg[cyan]%}%n \
%{$terminfo[bold]$fg[yellow]%}${current_dir}%{$reset_color%}\
${git_info} \
${devbox_indicator}
%{$terminfo[bold]$fg[red]%}$ %{$reset_color%}"

# http://superuser.com/questions/357107/zsh-right-justify-in-ps1
_lineup=$'\e[1A'
_linedown=$'\e[1B'
RPROMPT=%{${_lineup}%}%*%{${_linedown}%}


if [[ "$USER" == "root" ]]; then
PROMPT="
%{$terminfo[bold]$fg[blue]%}#%{$reset_color%} \
%{$bg[yellow]%}%{$fg[cyan]%}%n%{$reset_color%} \
%{$fg[white]%}at \
%{$fg[green]%}$(box_name) \
%{$fg[white]%}in \
%{$terminfo[bold]$fg[yellow]%}${current_dir}%{$reset_color%}\
${git_info} \
${devbox_indicator}\
%{$fg[white]%}[%*]
%{$terminfo[bold]$fg[red]%}$ %{$reset_color%}"
fi
